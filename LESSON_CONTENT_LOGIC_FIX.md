# üìã –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–º–µ—Ç–∏–ª –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: –≤ —É—Ä–æ–∫–µ "123" –µ—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ ("1231313"), –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ "–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ".

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- **`description`** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞ (—á—Ç–æ —ç—Ç–æ –∑–∞ —É—Ä–æ–∫)
- **`text_content`** - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–∫–∞ (—Å–∞–º –º–∞—Ç–µ—Ä–∏–∞–ª —É—Ä–æ–∫–∞)

### –°–∏—Ç—É–∞—Ü–∏—è —Å —É—Ä–æ–∫–æ–º "123":
- ‚úÖ `description = "1231313"` (–µ—Å—Ç—å)
- ‚ùå `text_content = NULL` (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- ‚úÖ `content_type = "text"`

### –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:
–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±–æ–≤–∞–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –Ω–∞–ª–∏—á–∏—è `text_content` –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä—É—è `description`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤ —Å fallback –Ω–∞ `description`:

### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:
1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –ï—Å–ª–∏ –µ—Å—Ç—å `text_content` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** –ï—Å–ª–∏ –Ω–µ—Ç `text_content`, –Ω–æ –µ—Å—Ç—å `description` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º `description` –∫–∞–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–∫–∞
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:** –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ —Ç–æ–≥–æ, –Ω–∏ –¥—Ä—É–≥–æ–≥–æ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

### –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```python
if lesson_data.content_type == 'text':
    # –î–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: text_content, –∑–∞—Ç–µ–º description –∫–∞–∫ fallback
    if lesson_data.text_content:
        content_text = lesson_data.text_content
    elif lesson_data.description:
        content_text = f"üìù {lesson_data.description}"
    else:
        content_text = "üìù –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ"
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
üìö 123

1231313

üìù –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
```

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
üìö 123

üìù 1231313
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:
- **–£—Ä–æ–∫ "123" (ID 5):** ‚úÖ –¢–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç description –∫–∞–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- **–£—Ä–æ–∫ "–Ω–æ–≤—ã–π" (ID 1):** ‚úÖ –¢–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç description –∫–∞–∫ fallback
- **–í–∏–¥–µ–æ —É—Ä–æ–∫–∏:** ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

1. **–ë–æ–ª–µ–µ —Ä–∞–∑—É–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ï—Å–ª–∏ –µ—Å—Ç—å description, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
2. **–õ—É—á—à–∏–π UX:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
3. **–ì–∏–±–∫–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å `text_content`, —Ç–∞–∫ –∏ —Å `description`
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –°—Ç–∞—Ä—ã–µ —É—Ä–æ–∫–∏ —Å `text_content` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª: `handlers/shop.py`
### –§—É–Ω–∫—Ü–∏—è: `view_lesson_content()` (—Å—Ç—Ä–æ–∫–∏ ~433-455)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
- –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- –õ–æ–≥–∏–∫–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞  
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É

**–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –±–æ–ª–µ–µ —É–º–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤!** üöÄ