#!/usr/bin/env python3
"""
–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π.
"""

print("üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏...")

try:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∞–π–ª support.py –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
    import ast
    
    with open("handlers/support.py", "r", encoding="utf-8") as f:
        source_code = f.read()
    
    # –ü–∞—Ä—Å–∏–º –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
    tree = ast.parse(source_code)
    print("‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–∞–π–ª–∞ handlers/support.py –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –∫–æ–¥–µ –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ "message is not modified"
    if "message is not modified" in source_code:
        print("‚úÖ –ù–∞–π–¥–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 'message is not modified'")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 'message is not modified'")
        
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –µ—Å—Ç—å try-except –±–ª–æ–∫–∏ –¥–ª—è edit_text
    if "except Exception as edit_error:" in source_code:
        print("‚úÖ –ù–∞–π–¥–µ–Ω—ã try-catch –±–ª–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã try-catch –±–ª–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Ç–∞—Ç—É—Å—ã —Ç–∏–∫–µ—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–µ
    if "üü¢ –û—Ç–∫—Ä—ã—Ç—ã–µ" in source_code and "üü° –í —Ä–∞–±–æ—Ç–µ" in source_code and "üî¥ –ó–∞–∫—Ä—ã—Ç—ã–µ" in source_code:
        print("‚úÖ –ù–∞–π–¥–µ–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Ç–∏–∫–µ—Ç–æ–≤")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é show_tickets_by_status
    if "async def show_tickets_by_status" in source_code:
        print("‚úÖ –§—É–Ω–∫—Ü–∏—è show_tickets_by_status –Ω–∞–π–¥–µ–Ω–∞")
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
        lines = source_code.split('\n')
        in_function = False
        function_lines = []
        
        for line in lines:
            if "async def show_tickets_by_status" in line:
                in_function = True
            elif in_function and line.startswith("async def ") or (in_function and line.startswith("@router")):
                break
            
            if in_function:
                function_lines.append(line)
        
        function_code = '\n'.join(function_lines)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
        if "Make text unique for each status" in function_code:
            print("‚úÖ –ù–∞–π–¥–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞")
        
        if "if \"message is not modified\" in str(edit_error):" in function_code:
            print("‚úÖ –ù–∞–π–¥–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 'message is not modified'")
        
        if "await call.answer(" in function_code:
            print("‚úÖ –ù–∞–π–¥–µ–Ω—ã –≤—ã–∑–æ–≤—ã call.answer –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    
    print("\nüéâ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")
    print("\nüìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:")
    print("1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–∫–∏ 'message is not modified'")
    print("2. ‚úÖ –°–¥–µ–ª–∞–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ —Ç–∏–∫–µ—Ç–æ–≤")
    print("3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã try-catch –±–ª–æ–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π")
    print("4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ call.answer –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö")
    
    print("\nüí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:")
    print("- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∏–∫–µ—Ç—ã —Å —Ç–µ–º –∂–µ —Å—Ç–∞—Ç—É—Å–æ–º —Ç–µ–∫—Å—Ç —Ç–µ–ø–µ—Ä—å —É–Ω–∏–∫–∞–ª–µ–Ω")
    print("- –ï—Å–ª–∏ Telegram API –≤—Å—ë –∂–µ –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É 'message is not modified', –æ–Ω–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è")
    print("- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ call.answer –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö")
    print("- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π")
    
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ: {e}")
    import traceback
    traceback.print_exc()