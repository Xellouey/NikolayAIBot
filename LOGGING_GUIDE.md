# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π

## üîç –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã**
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üöÄ PREVIEW_SYSTEM: –°–∏—Å—Ç–µ–º–∞ —É–º–Ω–æ–π –∑–∞–º–µ–Ω—ã –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
üöÄ PREVIEW_SYSTEM: –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π: {}
```

### 2. **–û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —É—Ä–æ–∫–∞**
```
üîç LESSON_DETAILS: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞. Callback: lesson:5
üîç LESSON_DETAILS: –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–µ–≤—å—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
```

### 3. **–û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π**  
```
üßπ CLEAR_PREVIEW: –ù–∞—á–∏–Ω–∞–µ–º –æ—á–∏—Å—Ç–∫—É –ø—Ä–µ–≤—å—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
üßπ CLEAR_PREVIEW: –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: {123456: [101, 102]}
üßπ CLEAR_PREVIEW: –ù–∞–π–¥–µ–Ω–æ 2 –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: [101, 102]
‚úÖ CLEAR_PREVIEW: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 101 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456  
‚úÖ CLEAR_PREVIEW: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 102 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
üèÅ CLEAR_PREVIEW: –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456. –£–¥–∞–ª–µ–Ω–æ: 2, –û—à–∏–±–æ–∫: 0
üßπ CLEAR_PREVIEW: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: {123456: []}
```

### 4. **–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ**
```
üé¨ LESSON_DETAILS: –ù–∞–π–¥–µ–Ω–æ –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ –¥–ª—è —É—Ä–æ–∫–∞ 5. File ID: BAADBAADrwADyIsAAU... 
üé¨ LESSON_DETAILS: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 123456
‚úÖ LESSON_DETAILS: –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. Message ID: 150
üìå LESSON_DETAILS: –°–æ—Ö—Ä–∞–Ω—è–µ–º message_id 150 –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
```

### 5. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ message_id –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ**
```
üìå ADD_PREVIEW: –î–æ–±–∞–≤–ª—è–µ–º message_id 150 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
üìå ADD_PREVIEW: –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: {123456: []}
‚úÖ ADD_PREVIEW: –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 150 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
üìå ADD_PREVIEW: –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: {123456: [150]}
üìå ADD_PREVIEW: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456 —Ç–µ–ø–µ—Ä—å 1 –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π
```

### 6. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é**
```
üìö CATALOG: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥
üìö CATALOG: –û—á–∏—â–∞–µ–º –ø—Ä–µ–≤—å—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456

‚¨ÖÔ∏è BACK_MAIN: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é  
‚¨ÖÔ∏è BACK_MAIN: –û—á–∏—â–∞–µ–º –ø—Ä–µ–≤—å—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
```

### 7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```
‚ö†Ô∏è CLEAR_PREVIEW: –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ 101: Message to delete not found
‚ÑπÔ∏è CLEAR_PREVIEW: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456 –Ω–µ—Ç –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
‚ÑπÔ∏è LESSON_DETAILS: –£ —É—Ä–æ–∫–∞ 5 –Ω–µ—Ç –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ
```

## üïµÔ∏è –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—å—é –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
**–ò—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- `üßπ CLEAR_PREVIEW: –ù–∞–π–¥–µ–Ω–æ X –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è`
- `‚ö†Ô∏è CLEAR_PREVIEW: –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—å—é –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
**–ò—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- `üìå ADD_PREVIEW: –î–æ–±–∞–≤–ª—è–µ–º message_id X`
- `‚úÖ LESSON_DETAILS: –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ`

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∏—Å—Ç–µ–º–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
**–ò—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- `üöÄ PREVIEW_SYSTEM: –°–∏—Å—Ç–µ–º–∞ —É–º–Ω–æ–π –∑–∞–º–µ–Ω—ã –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞`
- `üîç LESSON_DETAILS: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å X –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞`

## üéØ –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ª–æ–≥–∞

```
üöÄ PREVIEW_SYSTEM: –°–∏—Å—Ç–µ–º–∞ —É–º–Ω–æ–π –∑–∞–º–µ–Ω—ã –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
üîç LESSON_DETAILS: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞. Callback: lesson:1
üßπ CLEAR_PREVIEW: –ù–∞—á–∏–Ω–∞–µ–º –æ—á–∏—Å—Ç–∫—É –ø—Ä–µ–≤—å—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456
‚ÑπÔ∏è CLEAR_PREVIEW: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456 –Ω–µ—Ç –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è  
üé¨ LESSON_DETAILS: –ù–∞–π–¥–µ–Ω–æ –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ –¥–ª—è —É—Ä–æ–∫–∞ 1
‚úÖ LESSON_DETAILS: –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. Message ID: 101
üìå ADD_PREVIEW: –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 101

üîç LESSON_DETAILS: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞. Callback: lesson:2
üßπ CLEAR_PREVIEW: –ù–∞–π–¥–µ–Ω–æ 1 –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: [101]
‚úÖ CLEAR_PREVIEW: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 101
üé¨ LESSON_DETAILS: –ù–∞–π–¥–µ–Ω–æ –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ –¥–ª—è —É—Ä–æ–∫–∞ 2  
‚úÖ LESSON_DETAILS: –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. Message ID: 102
üìå ADD_PREVIEW: –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 102

‚¨ÖÔ∏è BACK_MAIN: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
üßπ CLEAR_PREVIEW: –ù–∞–π–¥–µ–Ω–æ 1 –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: [102]
‚úÖ CLEAR_PREVIEW: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–µ 102
üèÅ CLEAR_PREVIEW: –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞. –£–¥–∞–ª–µ–Ω–æ: 1, –û—à–∏–±–æ–∫: 0
```

## üõ†Ô∏è –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:

```python
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
print(f"DEBUG: {user_preview_messages}")

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –ø—Ä–µ–≤—å—é —É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
user_id = 123456
if user_id in user_preview_messages:
    print(f"DEBUG: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} –µ—Å—Ç—å {len(user_preview_messages[user_id])} –ø—Ä–µ–≤—å—é")
else:
    print(f"DEBUG: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} –Ω–µ—Ç –ø—Ä–µ–≤—å—é")
```